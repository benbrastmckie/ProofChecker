# Code Review Report: Metalogic State Post-Task 933

**Date**: 2026-02-26
**Scope**: Metalogic module state after Boneyard cleanup campaign (tasks 928-933)
**Session**: sess_1772128196_0183a7

## Executive Summary

The recent cleanup campaign (tasks 928-933) significantly simplified the Metalogic module by:
- Removing 4 dead-end approaches from active code
- Reducing active sorries from ~16 to 3
- Establishing clear architectural boundaries
- Consolidating on the all-MCS approach (`canonicalMCSBFMCS`)

## Current Sorry Inventory

**Total Active Sorries**: 3 (all in Bundle/)

| # | File | Line | Symbol | Nature |
|---|------|------|--------|--------|
| 1 | DovetailingChain.lean | 1869 | `buildDovetailingChainFamily_forward_F` | F-formula witness in linear chain |
| 2 | DovetailingChain.lean | 1881 | `buildDovetailingChainFamily_backward_P` | P-formula witness in linear chain |
| 3 | TemporalCoherentConstruction.lean | 600 | `fully_saturated_bfmcs_exists_int` | Combining temporal + modal saturation |

**Key Insight**: All 3 sorries trace to one fundamental problem - F/P formulas don't persist through GContent seeds in the linear dovetailing construction.

## What's Sorry-Free

| Component | Status | Notes |
|-----------|--------|-------|
| FMP Completeness | SORRY-FREE | SemanticCanonicalModel.lean |
| Soundness | SORRY-FREE | SoundnessLemmas.lean, Soundness.lean |
| Compactness | SORRY-FREE | Compactness.lean |
| Truth Lemma | SORRY-FREE | For completeness path |
| canonicalMCSBFMCS | SORRY-FREE | All-MCS approach with forward_F/backward_P |

## Active Module Structure (Post-Cleanup)

```
Metalogic/Bundle/
  FMCS.lean              # Temporal MCS families
  FMCSDef.lean           # FMCS structure definition
  BFMCS.lean             # Bundle structure
  BFMCSTruth.lean        # Truth definition (CLEANED - no eval_bmcs_*)
  TruthLemma.lean        # MCS membership <-> truth (SORRY-FREE)
  CanonicalFrame.lean    # Canonical relations (KEPT)
  CanonicalFMCS.lean     # All-MCS FMCS (CLEANED - no legacy section)
  ChainFMCS.lean         # Flag-based FMCS
  ModalSaturation.lean   # Modal saturation
  Construction.lean      # Building BFMCS
  DovetailingChain.lean  # Linear chain (2 sorries)
  TemporalCoherentConstruction.lean  # Combined existence (1 sorry)
  Completeness.lean      # Main theorems (SORRY-FREE)
```

## Boneyard Inventory (Archived Dead Ends)

| Approach | Location | Tasks | Why Abandoned |
|----------|----------|-------|---------------|
| CanonicalQuotient stack | Boneyard/Bundle/CanonicalQuotientApproach/ | 933 | backward_P blocked (past witnesses not future-reachable) |
| MCS-membership semantics | Boneyard/Bundle/MCSMembershipCompleteness.lean | 931 | Non-standard box semantics |
| Constant witness family | Boneyard/Metalogic_v7/Bundle/*.lean | 932 | Constant families can't satisfy F/P obligations |
| Single-family modal_backward | Boneyard/Metalogic_v7/Bundle/ | 928 | Requires Box phi => phi axiom |
| CoherentConstruction | Boneyard/Metalogic_v7/ | 928 | Superseded by DovetailingChain |

## Architectural Assessment

### Strengths
1. **Clean separation**: Active code vs Boneyard clearly delineated
2. **Single validity definition**: Standard `truth_at`/`valid` from Semantics/
3. **Documented alternatives**: Each dead end has clear rationale in Boneyard

### Remaining Challenges
1. **Int-indexed temporal coherence**: DovetailingChain can't resolve F/P obligations
2. **CanonicalMCS is Preorder, not Int**: all-MCS approach works but changes domain

## Path Forward Options

### Option A: Omega-Squared Construction (Document path in DovetailingChain)
- Process F-obligations immediately when they appear
- Prevents Lindenbaum from introducing blocking G(neg(psi))
- High complexity, ~doubles DovetailingChain proof effort

### Option B: Accept CanonicalMCS Domain
- Use D = CanonicalMCS (Preorder) instead of D = Int
- Forward_F and backward_P are already SORRY-FREE for this domain
- Requires restructuring completeness to use Preorder domain

### Option C: Maintain Current State
- 3 sorries are well-characterized and non-blocking for FMP completeness
- FMP completeness path is fully sorry-free
- Document as "alternative approach with known gap"

## Metrics

| Metric | Value | Trend |
|--------|-------|-------|
| Active sorries in Metalogic/ | 3 | Down from ~16 |
| Boneyard archive size | ~15 files | +5 from task 933 |
| Sorry-free completeness paths | 1 (FMP) | Stable |
| Dead-end approaches documented | 5 | +4 from cleanup |

## Recommendations

1. **Update ROAD_MAP.md** with current state (this review)
2. **Add Dead End entries** for tasks 928, 931, 932, 933 approaches
3. **Update Strategy status** for "Indexed MCS Family Approach" to reflect cleanup
4. **Consider Option C** (maintain current state) as pragmatic path - FMP completeness is already sorry-free

---

*Generated by /review command, session sess_1772128196_0183a7*
