\documentclass[../BimodalReference.tex]{subfiles}
\begin{document}

\section{Syntax}

\subsection{Formulas}

Formulas are defined inductively with six primitive constructors.

\begin{definition}[Formula]
The type \texttt{Formula} is defined by:
\[
  \varphi, \psi ::= p \mid \falsum \mid \varphi \imp \psi \mid \nec\varphi \mid \allpast\varphi \mid \allfuture\varphi
\]
where $p$ ranges over propositional atoms (type \texttt{String}).
\end{definition}

\begin{center}
\begin{tabular}{@{}lllp{4.5cm}@{}}
\toprule
Symbol & Name & Lean & Reading \\
\midrule
$p, q, r$ & Atom & \texttt{atom s} & propositional atom \\
$\falsum$ & Bottom & \texttt{bot} & falsity \\
$\varphi \imp \psi$ & Implication & \texttt{imp} & ``if $\varphi$ then $\psi$'' \\
$\nec\varphi$ & Necessity & \texttt{box} & ``necessarily $\varphi$'' \\
$\allpast\varphi$ & Always past & \texttt{all\_past} & ``always in the past, $\varphi$'' \\
$\allfuture\varphi$ & Always future & \texttt{all\_future} & ``always in the future, $\varphi$'' \\
\bottomrule
\end{tabular}
\end{center}

\subsection{Derived Operators}

The following operators are defined in terms of the primitives.

\begin{definition}[Propositional]
\begin{align*}
  \lneg\varphi &\coloneqq \varphi \imp \falsum && \text{(negation)} \\
  \varphi \land \psi &\coloneqq \lneg(\varphi \imp \lneg\psi) && \text{(conjunction)} \\
  \varphi \lor \psi &\coloneqq \lneg\varphi \imp \psi && \text{(disjunction)}
\end{align*}
\end{definition}

% TODO: the '(possibility)' does not align with the parentheticals above or below. It would also be better to use a table to explain their readings following their definitions. Do so for the next two definitions following.

\begin{definition}[Modal]
\begin{align*}
  \poss\varphi &\coloneqq \lneg\nec\lneg\varphi && \text{(possibility)}
\end{align*}
\end{definition}

% TODO: the \sometimes operator doesn't look right. I used \newcommand{\sometimes}{\ensuremath \rotatebox[origin=c]{180}{$\triangle$}} in my paper but maybe this can be improved if this definition is not standard or has unnecessary elements

\begin{definition}[Temporal]
\begin{align*}
  \somepast\varphi &\coloneqq \lneg\allpast\lneg\varphi && \text{(sometime past)} \\
  \somefuture\varphi &\coloneqq \lneg\allfuture\lneg\varphi && \text{(sometime future)} \\
  \always\varphi &\coloneqq \allpast\varphi \land \varphi \land \allfuture\varphi && \text{(always)} \\
  \sometimes\varphi &\coloneqq \somepast\varphi \lor \varphi \lor \somefuture\varphi && \text{(sometimes)}
\end{align*}
\end{definition}

\subsection{Temporal Duality}

The \texttt{swap\_temporal} function exchanges past and future operators.

% TODO: the \text{swap} doesn't look that good. Define \swap to be \langle{S}\rangle and use this instead of \text{swap}.

% TODO: this definition should take a more explicitly inductive form to help the reader anticipate how it goes in lean code

\begin{definition}[Temporal Swap]
\begin{align*}
  \text{swap}(p) &= p \\
  \text{swap}(\falsum) &= \falsum \\
  \text{swap}(\varphi \imp \psi) &= \text{swap}(\varphi) \imp \text{swap}(\psi) \\
  \text{swap}(\nec\varphi) &= \nec\text{swap}(\varphi) \\
  \text{swap}(\allpast\varphi) &= \allfuture\text{swap}(\varphi) \\
  \text{swap}(\allfuture\varphi) &= \allpast\text{swap}(\varphi)
\end{align*}
\end{definition}

\begin{theorem}[Involution]
$\text{swap}(\text{swap}(\varphi)) = \varphi$
\end{theorem}

\end{document}
